---
layout: post
title: 리눅스 LVM
date: 2021-04-08 23:20:00 + 0900
categories: [linux]
tags: [linux, lvm]
---
출처: https://wiseworld.tistory.com/32   
   
# 리눅스 LVM
리눅스는 디스크를 효율적으로 관리하고 사용하기 위해 LVM 을 사용한다.

## 1. LVM 을 사용하는 이유
  리눅스는 디스크를 여러 파티션으로 분할하고 파일 시스템을 사용해 특정 디렉토리와 연결시켜 사용한다.   
  하드디스크를 파티션으로 나눌 경우 물리적인 개념이 강해 디스크 추가 / 제거가 어렵고 고정적인 용량으로 사용하게 된다.   
  LVM 은 파티션을 논리적인 개념인 볼륨으로 나눠 디스크를 유동적으로 관리할 수 있다.   
  다수의 디스크 파티션을 하나의 볼륨으로 관리할 수 있어 여러 파티션을 합치거나 분할하기 용이하다.
  
## 2.볼륨과 파티션
> #### 2-1) 파티션
> 디스크는 파티션이라는 논리적인 크기로 분할 / 통합해 사용한다. 하나의 디스크를 여러 개로 분할하거나   
> 여러 개의 디스크를 하나의 파티션으로 통합해 사용한다.   
> 파티션은 물리적인 개념이 강해 한 번 설정하면 추가나 변경이 힘들고 OS 는 각 파티션을 별도의 디스크로 인식한다.
   
> #### 2-2) 볼륨
> 볼륨은 디스크의 파티션에 상주하며 파티션보다 논리적이고 유동적이다.   
> 볼륨은 파티션마다 하나씩 존재할 수 있고 여러 파티션에 걸쳐 하나만 존재할 수도 있다.

## 3. LMV 의 기능
  보통 리눅스는 디스크를 파티션으로 나누어 파일 시스템으로 만들고 각각의 디렉토리에 마운트 한 뒤 사용한다.   
  LVM 은 커널에 구현된 기능으로 파티션 대신 볼륨이라는 단위로 저장장치를 다루며    
  PV(Physical Volume) 을 VG(Volume Group) 으로 묶어 다시 LV(Logical Volume) 으로 나누어 파일 시스템을 만든다.   
  ___디스크 -> 파티션 -> PV -> VG -> LV -> 파일 시스템___   
   
  LVM 을 사용하면 디스크를 변경, 추가할 때 물리적인 부분을 건드릴 필요가 없다.   
  여러 디스크를 하나로 뭉쳐서 사용하거나 하나의 디스크를 여러 디스크로 나누어 사용할 수 있다.   
  사용 중인 파티션의 크기를 바꿀 수 있고 디슼를 추가한 두 간단한 작업을 통해 용량을 확장시킬 수 있다. 
  
## 4. LVM 의 구성
  - PV(Physical Volume) : 디스크를 LVM 엣 사용할 수 있게 변환한다. 디스크의 파티션을 PV 로 초기화 시키면 일정한 크기의 PE 로 구성된다.
  - PE(Physical Extent) : PV 에서 사용하는 블록. 보통 1PE 는 4MB 이고 LV 의 LE 와 1:1 대응한다.
  - VG(Volume Group) : PV 가 모여 만들어진 그룹. VG 는 LV 로 할당할 수 있는 공간이다.
  - LV(Logical Volume) :VG 에서 사용자가 필요한 만큼 할당해 만들어지는 공간이다. 논리적인 파티션으로 일정한 크기의 LE 로 구성된다.
  - LE(Logical Extent) : LV 가 나누어진 일정한 크기의 블록으로 PE 와 1:1 대응한다.

![FT_2021-04-08 23_17_16 426](https://user-images.githubusercontent.com/13375810/114043157-ff578280-98c0-11eb-9e86-67af184b41a1.png)
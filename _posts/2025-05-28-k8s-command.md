---
layout: post
title: kubernetes 명령어
date: 2025-05-28 19:00:00 + 0900
categories: [kubernetes]
tags: [kubernetes, k8s]
---
### 책 : 컨테이너 인프라 환경 구축을 위한 쿠버네티스/도커

## 명령어

#### 1. nginx pod 배포
- kubectl run nginx --image=nginx
	
#### 2. pod 확인
- kubectl get pod
	
#### 3. 배포한 pod의 ip 확인
- kubectl get pod -o wide

#### 4. 외부에서 pod에 접근하기 위해 NodePort 방식으로 expose
- kubectl expose pod nginx --type=NodePort --port=80
	- pod가 내부에 있는 container와 통신하기 위한 port: 80
		
#### 5. 노출된 것을 확인
- kubectl get service

#### 6. node에 대한 정보 확인
- kubectl get nodes -o wide

#### 7. nginx를 deploy
- kubectl create deployment deploy-nginx --image=nginx
	
#### 8. nginx를 한 번에 3개 deploy 
- kubectl scale deployment deploy-nginx --replicas=3
	
#### 9. 설정 파일을 이용해 metallb 설치
- kubectl apply -f ~/_Lecture_k8s_starter.kit/ch3/3.4/metallb.yaml

#### 10. chk-hn 레지스트리 deploy	
- kubectl create deployment chk-hn --image=sysnet4admin/chk-hn

#### 11. chk-hn을 한 번에 3개 deploy	
- kubectl scale deployment chk-hn --replicas=3
	
#### 12. 생성한 pods를 expose
- kubectl expose deployment chk-hn --type=LoadBalancer --port=80

#### 13. 배포한 서비스 삭제	
- kubectl delete service chk-hn
- kubectl delete service nginx
	
#### 14. 배포한 deployment 삭제
- kubectl delete deployment chk-hn
- kubectl delete deployment deploy-nginx

#### 15. 배포한 pod 삭제
- kubectl delete pod nginx

#### 16. metallb를 파일로 삭제
- kubectl delete -f ~/_Lecture_k8s_starter.kit/ch3/3.4/metallb.yaml
	
#### 17. 미리 만든 파일로 생성
- kubectl apply -f ~/_Lecture_k8s_starter.kit/ch5/5.1
	- del-deploy.yaml, del-pod.yaml

#### 18. pod 삭제
- kubectl delete pod del-pod
- kubectl delete pod del-deploy-d6c48dfbf-wx92z

#### 19. deploy 삭제
- kubectl delete deployment del-deploy
	
#### 20. 워커노드의 kubelet 중지
- systemctl stop kubelet

#### 21. 워커노드의 kubelet 상태 확인
- systemctl status kubelet

#### 22. 워커노드의 kubelet 실행
- systemctl start kubelet

#### 23. 워커노드의 컨테이너 런타임(containerd) 중지
- systemctl stop containerd

#### 24. 워커노드의 컨테이너 런타임(containerd) 상태 확인
- systemctl status containerd
	
#### 25. 워커노드의 컨테이너 런타임(containerd) 실행
- systemctl start containerd
	
#### 26. 배포된 파드의 세부 값을 확인하는 법
- kubectl get pods -o=custom-columns=NAME:.metadata.name,IP:.status.podIP,STATUS:.status.phase,NODE:.spec.nodeName

#### 27. 인그레스 설정
1. 인그레스 컨트롤러 설치
	- kubectl apply -f ~/_Book_k8sInfra/ch3/3.3.2/ingress-nginx.yaml
2. 인그레스 리소스 등록
	- kubectl apply -f ~/_Book_k8sInfra/ch3/3.3.2/ingress-config.yaml
3. 인그레스를 노드포트 서비스로 외부에 노출
	- kubectl apply -f ~/_Book_k8sInfra/ch3/3.3.2/ingress.yaml
4. deployment를 서비스로 외부에 노출
	- kubectl expose deployment in-ip-pod --name=ip-svc --port=80,443
	- kubectl expose deployment in-hname-pod --name=hname-svc-default --port=80,443